<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Hiển thị dữ liệu API</title>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
  <!-- SweetAlert2 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>

  <style>
    .section-container {
      margin-bottom: 20px;
      padding: 20px;
      border: 1px solid #ddd; /* Border color */
      border-radius: 10px; /* Border radius to round corners */
    }

    /* Custom styling for the Bootstrap switch */
    .form-switch {
      display: flex;
      align-items: center;
    }

    .form-switch .form-check-input {
      margin-left: 5px; /* Adjust margin for spacing */
    }

    .form-switch .form-check-label {
      margin-left: 10px; /* Adjust margin for spacing */
    }

    .form-check-input:checked {
      background-color: #2196F3; /* Color when checked */
    }

    .form-check-input:focus {
      box-shadow: 0 0 1px #2196F3; /* Focus style */
    }

    .form-check-label {
      color: #000; /* Label color */
    }

    .btn {
      background-color: #FF593E;
      color: aliceblue;
    }

    .white-background td {
      background-color: white !important;
    }
    tr.row-color-odd {
  background-color: #f2f2f2; /* Màu của các hàng lẻ */
}

tr.row-color-even {
  background-color: #ffffff; /* Màu của các hàng chẵn */
}

  </style>
</head>

<body>
  <div class="container section-container">
    <h3>Tìm kiếm đơn hàng  </h3>
    <table id="datatable" class="table table-striped table-bordered" style="width:100%">
      <thead>
        <tr>
    
          <th style="color: #000000">Tên sản phẩm</th>
          <th style="color: #000000">Điện thoại</th>
          <th style="color: #000000">Địa chỉ</th>
          <th style="color: #000000">Giá</th>
          <th style="color: #000000">Trạng thái</th>
          <th style="color: #000000">Chi tiết</th>
        </tr>
      </thead>
      <tbody>
        {{#each data}}
        <tr>
       
          <td>{{this.product_name}}</td>
          <td>{{this.product_price}}</td>
          <td>{{this.status.status_name}}</td>
          <td><button class="btn btn-primary detail-button" data-order-id="{{this._id}}">Chi tiết</button></td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
  <script>
    $(document).ready(function () {
      // Fetch orders data
      $.get('http://localhost:3000/api/getAllOrder', function (orders) {
        // Loop through orders and append to the table body
        orders.forEach(function (order) {
          const product = order.products[0]; // Assuming there's only one product in the order

          const row = `
            <tr>
         
              <td>${product.product_name}</td>
              <td>${order.address.phoneNumber}</td>
              <td>${order.address.addressLine}</td>
              <td>${order.total}</td>
              <td>${order.status.status_name}</td>
              <td><button class="btn btn-primary detail-button" data-order-id="${order._id}">Chi tiết</button></td>
            </tr>
          `;
          $('#datatable tbody').append(row);
        });

        $('#datatable tbody').on('click', '.detail-button', function () {
          const idorder = $(this).data('order-id');
          console.log(idorder);
          // Redirect to the detail page with order id
          window.location.href = 'http://localhost:3000/api/getByIdOder/' + idorder;
        });

        // Initialize DataTable
            $('#datatable').DataTable({
      columnDefs: [
        { width: '40px', targets: [0, 1, 2, 3, 4, 5] } // Adjust the width of all columns
      ],
      createdRow: function (row, data, dataIndex) {
        // Set the height of each row here (for example, 50px)
        $('td', row).css('height', '20px');
      }
    });
      });
    });
  </script>
</body>

</html>
