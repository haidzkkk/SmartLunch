<link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/searchpanes/1.4.0/css/searchPanes.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/searchpanes/1.4.0/js/dataTables.searchPanes.min.js"></script>
<link rel="stylesheet" href="style.css">
<style>
  .btn {
    background-color: #FF593E;
    color: aliceblue;
  }
</style>

<body>
  <div class="container">
    <h3>Chi tiết khuyến mãi</h3>
    <i style="float: right; font-size: small; text-">
      ID: {{data._id}}
    </i>
    <p></p>
    <form action="http://localhost:3000/api/coupons/{{data._id}}" method="post" id="updateForm">
      <div class="mb-3">
        <label class="form-label">Tên mã giảm giá</label>

        <input class="form-control" name="coupon_name" id="coupon_name" value="{{data.coupon_content}}" required="true">

        <div id="emailHelp" class="form-text"></div>
      </div>

      <div class="mb-3">

        <label class="form-label">Mã</label>

        <input class="form-control" name="coupon_code" id="coupon_code" value="{{data.coupon_code}}" required="true">
        <div id="emailHelp" class="form-text"></div>
      </div>

      <div class="mb-3">
        <label class="form-label">Nội dung</label>
        <input class="form-control" name="coupon_content" id="coupon_content" value="{{data.coupon_content}}"
          required="true">
        <div id="emailHelp" class="form-text"></div>
      </div>


      <div class="row">
        <div class="col">
          <label class="form-label">Số lượng</label>
          <input type="number" class="form-control" name="coupon_quantity" id="coupon_quantity"
            value="{{data.coupon_quantity}}" required="true">
          <div id="emailHelp" class="form-text"></div>
          <div id="emailHelp" class="form-text">Hãy nhập số</div>
        </div>

        <div class="col">
          <label class="form-label">Phần %</label>
          <input type="number" class="form-control" name="discount_amount" id="discount_amount"
            value="{{data.discount_amount}}" required="true">
          <div id="emailHelp" class="form-text"></div>
          <div id="emailHelp" class="form-text">Hãy nhập số</div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <label class="form-label">Giá được áp dụng mã
          </label>
          <input type="number" class="form-control" name="min_purchase_amount" id="min_purchase_amount"
            value="{{data.min_purchase_amount}}" required="true">
          <div id="emailHelp" class="form-text"></div>
          <div id="emailHelp" class="form-text">Hãy nhập số</div>
        </div>
        <div class="col">
          <label class="form-label">Ngày hết hạn</label>
          <input type="datetime-local" class="form-control" name="expiration_date" id="expiration_date"
            value="{{data.expiration_date}}" required="true">
          <div id="emailHelp" class="form-text"></div>
        </div>
      </div>

      <button type="submit" class="btn btn-primary fa-lg gradient-custom-2 mb-3" style="margin-top: 30px;">Cập nhật</button>


    </form>
    <script>
      function formatTime(timestamp) {
      if (!timestamp) return '';

      // Create a new Date object
      var date = new Date(timestamp);

      // Format the date in the desired way
      var formattedDate = `${date.getFullYear()}-${padZero(date.getMonth() + 1)}-${padZero(date.getDate())} ${padZero(date.getHours())}:${padZero(date.getMinutes())}:${padZero(date.getSeconds())}`;

      return formattedDate;
    }

    function padZero(num) {
      return num < 10 ? '0' + num : num;
    }
      document.getElementById('updateForm').addEventListener('submit', function (event) {
        const confirmDelete = confirm("Do you really want to update this?");
        if (!confirmDelete) {
          event.preventDefault();
        } else {
          if (window.location.href.includes('/api/admin/coupons')) {
            window.location.href = 'http://localhost:3000/api/admin/coupons';
          } else {

          }
        }
      });
      
    </script>
    <dir class="m-5 pb-5"></dir>

    
  </div>
</body>